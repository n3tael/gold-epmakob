{% extends 'base.html' %}

{% block meta %}
    {% if post.caption %}
        <meta property="og:description" content="{{ post.caption }}" />
    {% endif %}
    <meta property="og:image" content="{{ url_for('images.image', _external=True, id=post.image_id) }}" />
    <meta name="twitter:card" content="summary_large_image">
{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/post.css') }}">
    <title>–ü–æ—Å—Ç ‚Ññ{{ post.id }} ‚Äî {{ config.SITE_NAME }}</title>
{% endblock %}

{% block content %}
    <div class="page-post">
        <aside class="sidebar">
            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <ul>
                <li>ID: {{ post.id }}</li>
                <li>–ê–≤—Ç–æ—Ä: <a href="{{ url_for('authors.author', id=post.author_id) }}">{{ post.author_name }}</a></li>
                <li>–†–µ–π—Ç–∏–Ω–≥: {{ post.total_votes }}</li>
                <li>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ post.created_at }}</li>
                <li>–ó–∞–≥—Ä—É–∂–µ–Ω–æ: {{ post.uploaded_at }}</li>
                <div class="link-copy-container">
                    <input class="link-copy" value="{{ url_for('posts.post', _external=True, id=post.id) }}" disabled>
                    <button class="link-copy hide">üìã</button>
                </div>
            </ul>
            <h3>–î–µ–π—Å—Ç–≤–∏—è</h3>
            <ul>
                <li><a href="https://t.me/{{ post.chat }}/{{ post.message_id }}" target="_blank">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —á–∞—Ç–µ</a></li>
                <li>
                    <form method="POST">
                        <input type="hidden" name="csrf_token" value = "{{ csrf_token() }}" />
                        <button type="submit" class="vote">{% if post.is_voted %}–û—Ç–º–µ–Ω–∏—Ç—å –≥–æ–ª–æ—Å{% else %}–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å{% endif %}</button>
                    </form>
                </li>
            </ul>
        </aside>
        <section class="content">
            {% for image in images %}
                <img class="post-image" src="{{ url_for('images.image', id=image.id) }}"/>
            {% endfor %}
            {% if post.caption %}
                <p class="post-caption">{{ post.caption }}</p>
            {% endif %}
        </section>
    </div>

    <script src="{{ url_for('static', filename='js/post-clipboard.js') }}"></script>
{% endblock %}